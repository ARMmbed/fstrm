<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>fstrm: fstrm_control</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">fstrm
   &#160;<span id="projectnumber">0.2.0-pre</span>
   </div>
   <div id="projectbrief">Frame Streams implementation in C</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__fstrm__control.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">fstrm_control</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p><code>fstrm_control</code> is an interface for encoding and decoding Frame Streams control frames.</p>
<p>Two types of frames are possible in a Frame Streams byte stream: <b>data frames</b> and <b>control frames</b>. Both are variable length byte sequences prefixed by a 32-bit big endian unsigned integer (the <b>frame length</b>) specifying the length of the following byte sequence. If this frame length value is greater than zero, the <b>frame length</b> specifies the <b>data frame length</b>, and a data frame follows it. If the frame length is zero (i.e., it is the four byte sequence <code>00 00 00 00</code>), this is an <b>escape sequence</b>, which means that a control frame follows. The control frame itself is prefixed by a 32-bit big endian unsigned integer (the <b>control frame length</b>) specifying the length of the following <b>control frame payload</b>.</p>
<p>There are currently three types of control frames defined: <code>ACCEPT</code>, <code>START</code>, and <code>STOP</code> control frames.</p>
<p>A unidirectional Frame Streams byte stream normally consists of the following:</p>
<ol type="1">
<li>The <code>START</code> control frame.</li>
<li>A sequence of zero or more data frames or control frames that are not of the control frame types <code>ACCEPT</code>, <code>START</code>, or <code>STOP</code>.</li>
<li>The <code>STOP</code> control frame.</li>
</ol>
<p>The <code>START</code> and <code>STOP</code> control frames are not optional. The <code>START</code> control frame must appear at the beginning of the byte stream, and the <code>STOP</code> control frame must appear at the end of the byte stream. (If the byte stream has an end.) <code>START</code> control frames must not appear anywhere other than at the beginning of the byte stream, and <code>STOP</code> control frames must not appear anywhere other than at the end of the byte stream. Only one <code>START</code> control frame and only one <code>STOP</code> control frame may appear in a Frame Streams byte stream.</p>
<p>Control frames may optionally include zero or more <b>control frame fields</b>. There is currently one type of control frame field defined: <code>CONTENT_TYPE</code>. This field specifies a variable length byte sequence describing the encoding of data frames that appear in the Frame Streams byte stream. This field is used by cooperating programs to unambiguously identify how to interpret the data frames in a particular Frame Streams byte stream. For instance, this field may specify a particular schema to use to interpret the data frames appearing in the byte stream.</p>
<p>A Frame Streams encoder would normally produce a byte stream as follows:</p>
<ol type="1">
<li>Write the <code>START</code> <b>control frame</b>.<ul>
<li>At the start of the byte stream, write the four byte <b>escape sequence</b> <code>00 00 00 00</code> that precedes control frames.</li>
<li>Write the <b>control frame length</b> as a 32-bit big endian unsigned integer.</li>
<li>Write the <b>control frame payload</b>. It must be a <code>START</code> control frame. It may optionally specify a <code>CONTENT_TYPE</code> field.</li>
</ul>
</li>
<li>Write zero or more <b>data frames</b>.</li>
<li>Write the <code>STOP</code> <b>control frame</b>.<ul>
<li>At the start of the byte stream, write the four byte <b>escape sequence</b> <code>00 00 00 00</code> that precedes control frames.</li>
<li>Write the <b>control frame length</b> as a 32-bit big endian unsigned integer.</li>
<li>Write the <b>control frame payload</b>. It must be a <code>STOP</code> control frame. It may optionally specify a <code>CONTENT_TYPE</code> field.</li>
</ul>
</li>
</ol>
<p>A Frame Streams decoder would normally process the byte stream as follows:</p>
<ol type="1">
<li>Read the <code>START</code> control frame.<ul>
<li>At the start of the byte stream, read the four byte <b>escape sequence</b> <code>00 00 00 00</code> that precedes control frames.</li>
<li>Read the 32-bit big endian unsigned integer specifying the <b>control frame length</b>.</li>
<li>Decode the <b>control frame payload</b>. It must be a <code>START</code> control frame. It may optionally specify a <code>CONTENT_TYPE</code> field.</li>
</ul>
</li>
<li>Repeatedly read data frames or control frames following the <code>START</code> control frame.<ul>
<li>Read the <b>frame length</b>, a 32-bit big endian unsigned integer.</li>
<li>If the <b>frame length</b> is zero, a control frame follows:<ul>
<li>Read the 32-bit big endian unsigned integer specifying the <b>control frame length</b>.</li>
<li>Decode the <b>control frame payload</b>. If it is a <code>STOP</code> control frame, the end of the Frame Streams byte stream has occurred, and no frames follow. Break out of the decoding loop and halt processing. (<code>ACCEPT</code> and <code>START</code> control frames may not occur here. For forward compatibility, control frames of types other than <code>ACCEPT</code>, <code>START</code>, or <code>STOP</code> must be ignored. No control frames specified in the future may alter the encoding of succeeding frames.)</li>
</ul>
</li>
<li>If the <b>frame length</b> is non-zero, it specifies the number of bytes in the following <b>data frame</b>. Consume these bytes from the byte stream.</li>
</ul>
</li>
</ol>
<p>The functions <a class="el" href="group__fstrm__control.html#ga27ea01561e578fada59e136d4928347f" title="Encode a control frame into a buffer. ">fstrm_control_encode()</a> and <a class="el" href="group__fstrm__control.html#gaa5328a17b32c72d97050342d1e02353c" title="Decode a control frame from a buffer. ">fstrm_control_decode()</a> are provided to encode and decode control frames. See the detailed descriptions of those functions for code examples showing their usage. </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga4008509837532ab4515f425b4c6d693d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fstrm__control.html#ga4008509837532ab4515f425b4c6d693d">FSTRM_MAX_CONTROL_FRAME_LENGTH</a>&#160;&#160;&#160;512</td></tr>
<tr class="memdesc:ga4008509837532ab4515f425b4c6d693d"><td class="mdescLeft">&#160;</td><td class="mdescRight">The maximum length in bytes of an "Accept", "Start", or "Stop" control frame payload.  <a href="#ga4008509837532ab4515f425b4c6d693d">More...</a><br/></td></tr>
<tr class="separator:ga4008509837532ab4515f425b4c6d693d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3eb98fe31dc879740bb39a0fb27aa027"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fstrm__control.html#ga3eb98fe31dc879740bb39a0fb27aa027">FSTRM_MAX_CONTROL_FIELD_CONTENT_TYPE_LENGTH</a>&#160;&#160;&#160;256</td></tr>
<tr class="memdesc:ga3eb98fe31dc879740bb39a0fb27aa027"><td class="mdescLeft">&#160;</td><td class="mdescRight">The maximum length in bytes of a "Content Type" control frame field payload.  <a href="#ga3eb98fe31dc879740bb39a0fb27aa027">More...</a><br/></td></tr>
<tr class="separator:ga3eb98fe31dc879740bb39a0fb27aa027"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga0210744b7c387b0ae6d55e9737c40117"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fstrm__control.html#ga0210744b7c387b0ae6d55e9737c40117">fstrm_control_type</a> </td></tr>
<tr class="memdesc:ga0210744b7c387b0ae6d55e9737c40117"><td class="mdescLeft">&#160;</td><td class="mdescRight">Control frame types.  <a href="group__fstrm__control.html#ga0210744b7c387b0ae6d55e9737c40117">More...</a><br/></td></tr>
<tr class="separator:ga0210744b7c387b0ae6d55e9737c40117"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga81def568690686c13dff680b1b0c4d25"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fstrm__control.html#ga81def568690686c13dff680b1b0c4d25">fstrm_control_field</a> </td></tr>
<tr class="memdesc:ga81def568690686c13dff680b1b0c4d25"><td class="mdescLeft">&#160;</td><td class="mdescRight">Control frame field types.  <a href="group__fstrm__control.html#ga81def568690686c13dff680b1b0c4d25">More...</a><br/></td></tr>
<tr class="separator:ga81def568690686c13dff680b1b0c4d25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabeea197ecccbc24933fecb30aa90826d"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fstrm__control.html#gabeea197ecccbc24933fecb30aa90826d">fstrm_control_flag</a> </td></tr>
<tr class="memdesc:gabeea197ecccbc24933fecb30aa90826d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flags for controlling the behavior of <a class="el" href="group__fstrm__control.html#ga27ea01561e578fada59e136d4928347f" title="Encode a control frame into a buffer. ">fstrm_control_encode()</a> and <a class="el" href="group__fstrm__control.html#gaa5328a17b32c72d97050342d1e02353c" title="Decode a control frame from a buffer. ">fstrm_control_decode()</a>.  <a href="group__fstrm__control.html#gabeea197ecccbc24933fecb30aa90826d">More...</a><br/></td></tr>
<tr class="separator:gabeea197ecccbc24933fecb30aa90826d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga6cb915068a99803f322231f52fdad8d5"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fstrm__control.html#ga6cb915068a99803f322231f52fdad8d5">fstrm_control_type_to_str</a> (<a class="el" href="group__fstrm__control.html#ga0210744b7c387b0ae6d55e9737c40117">fstrm_control_type</a> type)</td></tr>
<tr class="memdesc:ga6cb915068a99803f322231f52fdad8d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert an <code>fstrm_control_type</code> enum value to a string representation.  <a href="#ga6cb915068a99803f322231f52fdad8d5">More...</a><br/></td></tr>
<tr class="separator:ga6cb915068a99803f322231f52fdad8d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga79019ca8c7dbb743fcc5a769f6167d7d"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fstrm__control.html#ga79019ca8c7dbb743fcc5a769f6167d7d">fstrm_control_field_type_to_str</a> (<a class="el" href="group__fstrm__control.html#ga81def568690686c13dff680b1b0c4d25">fstrm_control_field</a> f_type)</td></tr>
<tr class="memdesc:ga79019ca8c7dbb743fcc5a769f6167d7d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert an <code>fstrm_control_field</code> enum value to a string representation.  <a href="#ga79019ca8c7dbb743fcc5a769f6167d7d">More...</a><br/></td></tr>
<tr class="separator:ga79019ca8c7dbb743fcc5a769f6167d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga32839f6d4dd5e9c5554c9d6cbd4e69e1"><td class="memItemLeft" align="right" valign="top">struct fstrm_control *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fstrm__control.html#ga32839f6d4dd5e9c5554c9d6cbd4e69e1">fstrm_control_init</a> (void)</td></tr>
<tr class="memdesc:ga32839f6d4dd5e9c5554c9d6cbd4e69e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize an <code>fstrm_control</code> object.  <a href="#ga32839f6d4dd5e9c5554c9d6cbd4e69e1">More...</a><br/></td></tr>
<tr class="separator:ga32839f6d4dd5e9c5554c9d6cbd4e69e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5dbe51deff01060740ff09402410d1e2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fstrm__control.html#ga5dbe51deff01060740ff09402410d1e2">fstrm_control_destroy</a> (struct fstrm_control **c)</td></tr>
<tr class="memdesc:ga5dbe51deff01060740ff09402410d1e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy an <code>fstrm_control</code> object.  <a href="#ga5dbe51deff01060740ff09402410d1e2">More...</a><br/></td></tr>
<tr class="separator:ga5dbe51deff01060740ff09402410d1e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga29ff26d2c5eb6d2aad9a8c303547be23"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fstrm__control.html#ga29ff26d2c5eb6d2aad9a8c303547be23">fstrm_control_reset</a> (struct fstrm_control *c)</td></tr>
<tr class="memdesc:ga29ff26d2c5eb6d2aad9a8c303547be23"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reinitialize an <code>fstrm_control</code> object.  <a href="#ga29ff26d2c5eb6d2aad9a8c303547be23">More...</a><br/></td></tr>
<tr class="separator:ga29ff26d2c5eb6d2aad9a8c303547be23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga28f88503070e28cd3aca0e9a38db4d58"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__fstrm__res.html#gad3cb32b083ff99d02ccfbc1a69823329">fstrm_res</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fstrm__control.html#ga28f88503070e28cd3aca0e9a38db4d58">fstrm_control_get_type</a> (struct fstrm_control *c, <a class="el" href="group__fstrm__control.html#ga0210744b7c387b0ae6d55e9737c40117">fstrm_control_type</a> *type)</td></tr>
<tr class="memdesc:ga28f88503070e28cd3aca0e9a38db4d58"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the type of the control frame.  <a href="#ga28f88503070e28cd3aca0e9a38db4d58">More...</a><br/></td></tr>
<tr class="separator:ga28f88503070e28cd3aca0e9a38db4d58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5b7a7454dee3e122c1f2ac55720cddc2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__fstrm__res.html#gad3cb32b083ff99d02ccfbc1a69823329">fstrm_res</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fstrm__control.html#ga5b7a7454dee3e122c1f2ac55720cddc2">fstrm_control_set_type</a> (struct fstrm_control *c, <a class="el" href="group__fstrm__control.html#ga0210744b7c387b0ae6d55e9737c40117">fstrm_control_type</a> type)</td></tr>
<tr class="memdesc:ga5b7a7454dee3e122c1f2ac55720cddc2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the type of the control frame.  <a href="#ga5b7a7454dee3e122c1f2ac55720cddc2">More...</a><br/></td></tr>
<tr class="separator:ga5b7a7454dee3e122c1f2ac55720cddc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga24774fbe4cc5df6e97ef12febf03ecf4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__fstrm__res.html#gad3cb32b083ff99d02ccfbc1a69823329">fstrm_res</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fstrm__control.html#ga24774fbe4cc5df6e97ef12febf03ecf4">fstrm_control_get_field_content_type</a> (struct fstrm_control *c, const uint8_t **content_type, size_t *len_content_type)</td></tr>
<tr class="memdesc:ga24774fbe4cc5df6e97ef12febf03ecf4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the "Content Type" of the control frame.  <a href="#ga24774fbe4cc5df6e97ef12febf03ecf4">More...</a><br/></td></tr>
<tr class="separator:ga24774fbe4cc5df6e97ef12febf03ecf4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab468ed5c1af4e7a76b2d2dec4f404ae0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__fstrm__res.html#gad3cb32b083ff99d02ccfbc1a69823329">fstrm_res</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fstrm__control.html#gab468ed5c1af4e7a76b2d2dec4f404ae0">fstrm_control_set_field_content_type</a> (struct fstrm_control *c, const uint8_t *content_type, size_t len_content_type)</td></tr>
<tr class="memdesc:gab468ed5c1af4e7a76b2d2dec4f404ae0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the "Content Type" of the control frame.  <a href="#gab468ed5c1af4e7a76b2d2dec4f404ae0">More...</a><br/></td></tr>
<tr class="separator:gab468ed5c1af4e7a76b2d2dec4f404ae0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa5328a17b32c72d97050342d1e02353c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__fstrm__res.html#gad3cb32b083ff99d02ccfbc1a69823329">fstrm_res</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fstrm__control.html#gaa5328a17b32c72d97050342d1e02353c">fstrm_control_decode</a> (struct fstrm_control *c, const void *control_frame, size_t len_control_frame, const uint32_t flags)</td></tr>
<tr class="memdesc:gaa5328a17b32c72d97050342d1e02353c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decode a control frame from a buffer.  <a href="#gaa5328a17b32c72d97050342d1e02353c">More...</a><br/></td></tr>
<tr class="separator:gaa5328a17b32c72d97050342d1e02353c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaeeb62913022d3b9cdd9179977f8ddd35"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__fstrm__res.html#gad3cb32b083ff99d02ccfbc1a69823329">fstrm_res</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fstrm__control.html#gaeeb62913022d3b9cdd9179977f8ddd35">fstrm_control_encoded_size</a> (struct fstrm_control *c, size_t *len_control_frame, const uint32_t flags)</td></tr>
<tr class="memdesc:gaeeb62913022d3b9cdd9179977f8ddd35"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate the number of bytes needed to serialize the control frame.  <a href="#gaeeb62913022d3b9cdd9179977f8ddd35">More...</a><br/></td></tr>
<tr class="separator:gaeeb62913022d3b9cdd9179977f8ddd35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga27ea01561e578fada59e136d4928347f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__fstrm__res.html#gad3cb32b083ff99d02ccfbc1a69823329">fstrm_res</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fstrm__control.html#ga27ea01561e578fada59e136d4928347f">fstrm_control_encode</a> (struct fstrm_control *c, void *control_frame, size_t *len_control_frame, const uint32_t flags)</td></tr>
<tr class="memdesc:ga27ea01561e578fada59e136d4928347f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Encode a control frame into a buffer.  <a href="#ga27ea01561e578fada59e136d4928347f">More...</a><br/></td></tr>
<tr class="separator:ga27ea01561e578fada59e136d4928347f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga4008509837532ab4515f425b4c6d693d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FSTRM_MAX_CONTROL_FRAME_LENGTH&#160;&#160;&#160;512</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The maximum length in bytes of an "Accept", "Start", or "Stop" control frame payload. </p>
<p>This excludes the escape sequence and the control frame length. </p>

</div>
</div>
<a class="anchor" id="ga3eb98fe31dc879740bb39a0fb27aa027"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FSTRM_MAX_CONTROL_FIELD_CONTENT_TYPE_LENGTH&#160;&#160;&#160;256</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The maximum length in bytes of a "Content Type" control frame field payload. </p>
<p>This excludes the field type and payload length. </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="ga0210744b7c387b0ae6d55e9737c40117"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__fstrm__control.html#ga0210744b7c387b0ae6d55e9737c40117">fstrm_control_type</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Control frame types. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="gga0210744b7c387b0ae6d55e9737c40117aacb88c15de46b675fe709462fa1f1065"></a>FSTRM_CONTROL_ACCEPT</em>&#160;</td><td class="fielddoc">
<p>Control frame type value for "Accept" control frames. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="gga0210744b7c387b0ae6d55e9737c40117a3c99a233e0c4c15cd815c430bcdfe8a6"></a>FSTRM_CONTROL_START</em>&#160;</td><td class="fielddoc">
<p>Control frame type value for "Start" control frames. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="gga0210744b7c387b0ae6d55e9737c40117a4c3d9549d3f2b1e9698812c2200a77bf"></a>FSTRM_CONTROL_STOP</em>&#160;</td><td class="fielddoc">
<p>Control frame type value for "Stop" control frames. </p>
</td></tr>
</table>

</div>
</div>
<a class="anchor" id="ga81def568690686c13dff680b1b0c4d25"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__fstrm__control.html#ga81def568690686c13dff680b1b0c4d25">fstrm_control_field</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Control frame field types. </p>
<p>These are optional fields that can appear in control frames. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="gga81def568690686c13dff680b1b0c4d25a990a2704f3e6070055c387085244b47d"></a>FSTRM_CONTROL_FIELD_CONTENT_TYPE</em>&#160;</td><td class="fielddoc">
<p>Control frame field type value for the "Content Type" control frame option. </p>
</td></tr>
</table>

</div>
</div>
<a class="anchor" id="gabeea197ecccbc24933fecb30aa90826d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__fstrm__control.html#gabeea197ecccbc24933fecb30aa90826d">fstrm_control_flag</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flags for controlling the behavior of <a class="el" href="group__fstrm__control.html#ga27ea01561e578fada59e136d4928347f" title="Encode a control frame into a buffer. ">fstrm_control_encode()</a> and <a class="el" href="group__fstrm__control.html#gaa5328a17b32c72d97050342d1e02353c" title="Decode a control frame from a buffer. ">fstrm_control_decode()</a>. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="ggabeea197ecccbc24933fecb30aa90826da32b9304249abae50dd127091b0d7ae19"></a>FSTRM_CONTROL_FLAG_WITH_HEADER</em>&#160;</td><td class="fielddoc">
<p>Set to control whether to include the control frame header in encoding/decoding operations. </p>
<p>Causes <a class="el" href="group__fstrm__control.html#ga27ea01561e578fada59e136d4928347f" title="Encode a control frame into a buffer. ">fstrm_control_encode()</a> and <a class="el" href="group__fstrm__control.html#gaeeb62913022d3b9cdd9179977f8ddd35" title="Calculate the number of bytes needed to serialize the control frame. ">fstrm_control_encoded_size()</a> to include the control frame header containing the escape sequence and control frame payload length in the encoded output. Otherwise, only the control frame payload itself is encoded.</p>
<p>Tells <a class="el" href="group__fstrm__control.html#gaa5328a17b32c72d97050342d1e02353c" title="Decode a control frame from a buffer. ">fstrm_control_decode()</a> that the input buffer to be decoded begins with the control frame header containing the escape sequence and control frame payload length. (Note that this requires the caller to peak at the input buffer to calculate the right buffer length.) Otherwise, the input buffer begins with the control frame payload. * </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga6cb915068a99803f322231f52fdad8d5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* fstrm_control_type_to_str </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__fstrm__control.html#ga0210744b7c387b0ae6d55e9737c40117">fstrm_control_type</a>&#160;</td>
          <td class="paramname"><em>type</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert an <code>fstrm_control_type</code> enum value to a string representation. </p>
<p>Unknown values are represented as <code>"FSTRM_CONTROL_UNKNOWN"</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>The <code>fstrm_control_type</code> enum value. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The string representation of the enum value. (Always non-NULL.) </dd></dl>

</div>
</div>
<a class="anchor" id="ga79019ca8c7dbb743fcc5a769f6167d7d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* fstrm_control_field_type_to_str </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__fstrm__control.html#ga81def568690686c13dff680b1b0c4d25">fstrm_control_field</a>&#160;</td>
          <td class="paramname"><em>f_type</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert an <code>fstrm_control_field</code> enum value to a string representation. </p>
<p>Unknown values are represented as <code>"FSTRM_CONTROL_FIELD_UNKNOWN"</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">f_type</td><td>The <code>fstrm_control_field</code> enum value. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The string representation of the enum value. (Always non-NULL.) </dd></dl>

</div>
</div>
<a class="anchor" id="ga32839f6d4dd5e9c5554c9d6cbd4e69e1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct fstrm_control* fstrm_control_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize an <code>fstrm_control</code> object. </p>
<p>This object represents Frame Streams control frames and is used for encoding and decoding control frames.</p>
<dl class="section return"><dt>Returns</dt><dd>An <code>fstrm_control</code> object. </dd></dl>

</div>
</div>
<a class="anchor" id="ga5dbe51deff01060740ff09402410d1e2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fstrm_control_destroy </td>
          <td>(</td>
          <td class="paramtype">struct fstrm_control **&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroy an <code>fstrm_control</code> object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">c</td><td>Pointer to an <code>fstrm_control</code> object. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga29ff26d2c5eb6d2aad9a8c303547be23"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fstrm_control_reset </td>
          <td>(</td>
          <td class="paramtype">struct fstrm_control *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reinitialize an <code>fstrm_control</code> object. </p>
<p>This resets the internal state to default values.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td><code>fstrm_control</code> object. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga28f88503070e28cd3aca0e9a38db4d58"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__fstrm__res.html#gad3cb32b083ff99d02ccfbc1a69823329">fstrm_res</a> fstrm_control_get_type </td>
          <td>(</td>
          <td class="paramtype">struct fstrm_control *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__fstrm__control.html#ga0210744b7c387b0ae6d55e9737c40117">fstrm_control_type</a> *&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve the type of the control frame. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">c</td><td><code>fstrm_control</code> object. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">type</td><td>Type of the control frame.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>fstrm_res_success </dd>
<dd>
fstrm_res_failure </dd></dl>

</div>
</div>
<a class="anchor" id="ga5b7a7454dee3e122c1f2ac55720cddc2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__fstrm__res.html#gad3cb32b083ff99d02ccfbc1a69823329">fstrm_res</a> fstrm_control_set_type </td>
          <td>(</td>
          <td class="paramtype">struct fstrm_control *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__fstrm__control.html#ga0210744b7c387b0ae6d55e9737c40117">fstrm_control_type</a>&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the type of the control frame. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">c</td><td><code>fstrm_control</code> object. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">type</td><td>Type of the control frame.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>fstrm_res_success </dd>
<dd>
fstrm_res_failure </dd></dl>

</div>
</div>
<a class="anchor" id="ga24774fbe4cc5df6e97ef12febf03ecf4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__fstrm__res.html#gad3cb32b083ff99d02ccfbc1a69823329">fstrm_res</a> fstrm_control_get_field_content_type </td>
          <td>(</td>
          <td class="paramtype">struct fstrm_control *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t **&#160;</td>
          <td class="paramname"><em>content_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>len_content_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve the "Content Type" of the control frame. </p>
<p>This function returns a reference which must not be modified.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">c</td><td><code>fstrm_control</code> object. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">content_type</td><td>Pointer to where the reference to the "Content Type" string will be stored. Note that this string is not NUL-terminated and may contain embedded NULs. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">len_content_type</td><td>The number of bytes in <code>content_type</code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>fstrm_res_success The control frame has a "Content Type" field. </dd>
<dd>
fstrm_res_failure The control frame does not have a "Content Type" field. </dd></dl>

</div>
</div>
<a class="anchor" id="gab468ed5c1af4e7a76b2d2dec4f404ae0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__fstrm__res.html#gad3cb32b083ff99d02ccfbc1a69823329">fstrm_res</a> fstrm_control_set_field_content_type </td>
          <td>(</td>
          <td class="paramtype">struct fstrm_control *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>content_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len_content_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the "Content Type" of the control frame. </p>
<p>This function makes a copy of the provided string. This function is safe to call multiple times, as previous field values will be discarded.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">c</td><td><code>fstrm_control</code> object. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">content_type</td><td>The "Content Type" string to copy. Note that this string is not NUL-terminated and may contain embedded NULs. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len_content_type</td><td>The number of bytes in <code>content_type</code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>fstrm_res_success The "Content Type" field was successfully set. </dd>
<dd>
fstrm_res_failure The "Content Type" string is too long. </dd></dl>

</div>
</div>
<a class="anchor" id="gaa5328a17b32c72d97050342d1e02353c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__fstrm__res.html#gad3cb32b083ff99d02ccfbc1a69823329">fstrm_res</a> fstrm_control_decode </td>
          <td>(</td>
          <td class="paramtype">struct fstrm_control *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>control_frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len_control_frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decode a control frame from a buffer. </p>
<p>The buffer starts with either the escape sequence or the control frame payload depending on whether the <code>FSTRM_CONTROL_FLAG_WITH_HEADER</code> flag is set or not.</p>
<p>The following code example shows a function that decodes a control frame payload: </p>
<div class="fragment"><div class="line"><a class="code" href="group__fstrm__res.html#gad3cb32b083ff99d02ccfbc1a69823329" title="Result codes for functions. ">fstrm_res</a></div>
<div class="line">decode_control_frame(<span class="keyword">const</span> <span class="keywordtype">void</span> *control_frame, <span class="keywordtype">size_t</span> len_control_frame)</div>
<div class="line">{</div>
<div class="line">        <a class="code" href="group__fstrm__res.html#gad3cb32b083ff99d02ccfbc1a69823329" title="Result codes for functions. ">fstrm_res</a> res;</div>
<div class="line">        <a class="code" href="group__fstrm__control.html#ga0210744b7c387b0ae6d55e9737c40117" title="Control frame types. ">fstrm_control_type</a> c_type;</div>
<div class="line">        <span class="keyword">struct </span>fstrm_control *c;</div>
<div class="line">        uint32_t flags = 0;</div>
<div class="line"></div>
<div class="line">        c = <a class="code" href="group__fstrm__control.html#ga32839f6d4dd5e9c5554c9d6cbd4e69e1" title="Initialize an fstrm_control object. ">fstrm_control_init</a>();</div>
<div class="line"></div>
<div class="line">        res = <a class="code" href="group__fstrm__control.html#gaa5328a17b32c72d97050342d1e02353c" title="Decode a control frame from a buffer. ">fstrm_control_decode</a>(c, control_frame, len_control_frame, flags);</div>
<div class="line">        <span class="keywordflow">if</span> (res != <a class="code" href="group__fstrm__res.html#ggad3cb32b083ff99d02ccfbc1a69823329a89de17ab416590c6c61b2b5f7dd7844a" title="Success. ">fstrm_res_success</a>) {</div>
<div class="line">                puts(<span class="stringliteral">&quot;fstrm_control_decode() failed.&quot;</span>);</div>
<div class="line">                <a class="code" href="group__fstrm__control.html#ga5dbe51deff01060740ff09402410d1e2" title="Destroy an fstrm_control object. ">fstrm_control_destroy</a>(&amp;c);</div>
<div class="line">                <span class="keywordflow">return</span> res;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        res = <a class="code" href="group__fstrm__control.html#ga28f88503070e28cd3aca0e9a38db4d58" title="Retrieve the type of the control frame. ">fstrm_control_get_type</a>(c, &amp;c_type);</div>
<div class="line">        <span class="keywordflow">if</span> (res != <a class="code" href="group__fstrm__res.html#ggad3cb32b083ff99d02ccfbc1a69823329a89de17ab416590c6c61b2b5f7dd7844a" title="Success. ">fstrm_res_success</a>) {</div>
<div class="line">                puts(<span class="stringliteral">&quot;fstrm_control_get_type() failed.&quot;</span>);</div>
<div class="line">                <a class="code" href="group__fstrm__control.html#ga5dbe51deff01060740ff09402410d1e2" title="Destroy an fstrm_control object. ">fstrm_control_destroy</a>(&amp;c);</div>
<div class="line">                <span class="keywordflow">return</span> res;</div>
<div class="line">        }</div>
<div class="line">        printf(<span class="stringliteral">&quot;The control frame is of type %s (%u).\n&quot;</span>,</div>
<div class="line">               <a class="code" href="group__fstrm__control.html#ga6cb915068a99803f322231f52fdad8d5" title="Convert an fstrm_control_type enum value to a string representation. ">fstrm_control_type_to_str</a>(c_type), c_type);</div>
<div class="line"></div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">void</span> *content_type;</div>
<div class="line">        <span class="keywordtype">size_t</span> len_content_type;</div>
<div class="line">        res = <a class="code" href="group__fstrm__control.html#ga24774fbe4cc5df6e97ef12febf03ecf4" title="Retrieve the &quot;Content Type&quot; of the control frame. ">fstrm_control_get_field_content_type</a>(c,</div>
<div class="line">                &amp;content_type, &amp;len_content_type);</div>
<div class="line">        <span class="keywordflow">if</span> (res == <a class="code" href="group__fstrm__res.html#ggad3cb32b083ff99d02ccfbc1a69823329a89de17ab416590c6c61b2b5f7dd7844a" title="Success. ">fstrm_res_success</a>) {</div>
<div class="line">                printf(<span class="stringliteral">&quot;The control frame has a CONTENT_TYPE field of length %zd.\n&quot;</span>,</div>
<div class="line">                       len_content_type);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="group__fstrm__control.html#ga5dbe51deff01060740ff09402410d1e2" title="Destroy an fstrm_control object. ">fstrm_control_destroy</a>(&amp;c);</div>
<div class="line">        <span class="keywordflow">return</span> <a class="code" href="group__fstrm__res.html#ggad3cb32b083ff99d02ccfbc1a69823329a89de17ab416590c6c61b2b5f7dd7844a" title="Success. ">fstrm_res_success</a>;</div>
<div class="line">}</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">c</td><td><code>fstrm_control</code> object. Its state will be overwritten. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">control_frame</td><td>Buffer containing the serialized control frame. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len_control_frame</td><td>The number of bytes in <code>control_frame</code>. This parameter must specify the exact number of bytes in the control frame. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">flags</td><td>Flags controlling the decoding process. See <a class="el" href="group__fstrm__control.html#gabeea197ecccbc24933fecb30aa90826d" title="Flags for controlling the behavior of fstrm_control_encode() and fstrm_control_decode(). ">fstrm_control_flag</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>fstrm_res_success </dd>
<dd>
fstrm_res_failure </dd></dl>

</div>
</div>
<a class="anchor" id="gaeeb62913022d3b9cdd9179977f8ddd35"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__fstrm__res.html#gad3cb32b083ff99d02ccfbc1a69823329">fstrm_res</a> fstrm_control_encoded_size </td>
          <td>(</td>
          <td class="paramtype">struct fstrm_control *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>len_control_frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculate the number of bytes needed to serialize the control frame. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">c</td><td><code>fstrm_control</code> object. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">len_control_frame</td><td>The number of bytes needed to encode <code>c</code>. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">flags</td><td>Flags controlling the encoding process. See <a class="el" href="group__fstrm__control.html#gabeea197ecccbc24933fecb30aa90826d" title="Flags for controlling the behavior of fstrm_control_encode() and fstrm_control_decode(). ">fstrm_control_flag</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>fstrm_res_success </dd>
<dd>
fstrm_res_failure </dd></dl>

</div>
</div>
<a class="anchor" id="ga27ea01561e578fada59e136d4928347f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__fstrm__res.html#gad3cb32b083ff99d02ccfbc1a69823329">fstrm_res</a> fstrm_control_encode </td>
          <td>(</td>
          <td class="paramtype">struct fstrm_control *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>control_frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>len_control_frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Encode a control frame into a buffer. </p>
<p>Since a Frame Streams control frame is a variable length byte sequence of up to <a class="el" href="group__fstrm__control.html#ga4008509837532ab4515f425b4c6d693d" title="The maximum length in bytes of an &quot;Accept&quot;, &quot;Start&quot;, or &quot;Stop&quot; control frame payload. ">FSTRM_MAX_CONTROL_FRAME_LENGTH</a> bytes, this function can be used in two different ways. The first way is to call <a class="el" href="group__fstrm__control.html#gaeeb62913022d3b9cdd9179977f8ddd35" title="Calculate the number of bytes needed to serialize the control frame. ">fstrm_control_encoded_size()</a> to obtain the exact number of bytes needed to encode the frame, and then pass a buffer of this exact size to <a class="el" href="group__fstrm__control.html#ga27ea01561e578fada59e136d4928347f" title="Encode a control frame into a buffer. ">fstrm_control_encode()</a>. The following example shows this usage: </p>
<div class="fragment"><div class="line"><a class="code" href="group__fstrm__res.html#gad3cb32b083ff99d02ccfbc1a69823329" title="Result codes for functions. ">fstrm_res</a> res;</div>
<div class="line"><span class="keyword">struct </span>fstrm_control *c;</div>
<div class="line">uint8_t *control_frame;</div>
<div class="line"><span class="keywordtype">size_t</span> len_control_frame;</div>
<div class="line">uint32_t flags = 0;</div>
<div class="line"></div>
<div class="line">c = <a class="code" href="group__fstrm__control.html#ga32839f6d4dd5e9c5554c9d6cbd4e69e1" title="Initialize an fstrm_control object. ">fstrm_control_init</a>();</div>
<div class="line">res = <a class="code" href="group__fstrm__control.html#ga5b7a7454dee3e122c1f2ac55720cddc2" title="Set the type of the control frame. ">fstrm_control_set_type</a>(c, <a class="code" href="group__fstrm__control.html#gga0210744b7c387b0ae6d55e9737c40117a3c99a233e0c4c15cd815c430bcdfe8a6" title="Control frame type value for &quot;Start&quot; control frames. ">FSTRM_CONTROL_START</a>);</div>
<div class="line"><span class="keywordflow">if</span> (res != <a class="code" href="group__fstrm__res.html#ggad3cb32b083ff99d02ccfbc1a69823329a89de17ab416590c6c61b2b5f7dd7844a" title="Success. ">fstrm_res_success</a>) {</div>
<div class="line">        <span class="comment">// Error handling goes here.</span></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// Calculate the number of bytes needed.</span></div>
<div class="line">res = <a class="code" href="group__fstrm__control.html#gaeeb62913022d3b9cdd9179977f8ddd35" title="Calculate the number of bytes needed to serialize the control frame. ">fstrm_control_encoded_size</a>(c, &amp;len_control_frame, flags);</div>
<div class="line"><span class="keywordflow">if</span> (res != <a class="code" href="group__fstrm__res.html#ggad3cb32b083ff99d02ccfbc1a69823329a89de17ab416590c6c61b2b5f7dd7844a" title="Success. ">fstrm_res_success</a>) {</div>
<div class="line">        <span class="comment">// Error handling goes here.</span></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// &#39;len_control_frame&#39; now specifies the number of bytes required for</span></div>
<div class="line"><span class="comment">// the control frame. Allocate the needed space.</span></div>
<div class="line">control_frame = malloc(len_control_frame);</div>
<div class="line"><span class="keywordflow">if</span> (!control_frame) {</div>
<div class="line">        <span class="comment">// Error handling goes here.</span></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// Serialize the control frame into the allocated buffer.</span></div>
<div class="line">res = <a class="code" href="group__fstrm__control.html#ga27ea01561e578fada59e136d4928347f" title="Encode a control frame into a buffer. ">fstrm_control_encode</a>(c, control_frame, &amp;len_control_frame, 0);</div>
<div class="line"><span class="keywordflow">if</span> (res != <a class="code" href="group__fstrm__res.html#ggad3cb32b083ff99d02ccfbc1a69823329a89de17ab416590c6c61b2b5f7dd7844a" title="Success. ">fstrm_res_success</a>) {</div>
<div class="line">        <span class="comment">// Error handling goes here.</span></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// Do something with &#39;control_frame&#39; and &#39;len_control_frame&#39;.</span></div>
<div class="line"></div>
<div class="line"><span class="comment">// Clean up.</span></div>
<div class="line">free(control_frame);</div>
<div class="line"><a class="code" href="group__fstrm__control.html#ga5dbe51deff01060740ff09402410d1e2" title="Destroy an fstrm_control object. ">fstrm_control_destroy</a>(&amp;c);</div>
</div><!-- fragment --><p>The second way to use <a class="el" href="group__fstrm__control.html#ga27ea01561e578fada59e136d4928347f" title="Encode a control frame into a buffer. ">fstrm_control_encode()</a> is to allocate a statically sized buffer of <a class="el" href="group__fstrm__control.html#ga4008509837532ab4515f425b4c6d693d" title="The maximum length in bytes of an &quot;Accept&quot;, &quot;Start&quot;, or &quot;Stop&quot; control frame payload. ">FSTRM_MAX_CONTROL_FRAME_LENGTH</a> bytes. The exact number of bytes serialized by the encoder will be returned in the <code>len_control_frame</code> parameter. The following example shows this usage: </p>
<div class="fragment"><div class="line"><a class="code" href="group__fstrm__res.html#gad3cb32b083ff99d02ccfbc1a69823329" title="Result codes for functions. ">fstrm_res</a> res;</div>
<div class="line"><span class="keyword">struct </span>fstrm_control *c;</div>
<div class="line">uint8_t control_frame[<a class="code" href="group__fstrm__control.html#ga4008509837532ab4515f425b4c6d693d" title="The maximum length in bytes of an &quot;Accept&quot;, &quot;Start&quot;, or &quot;Stop&quot; control frame payload. ">FSTRM_MAX_CONTROL_FRAME_LENGTH</a>];</div>
<div class="line"><span class="keywordtype">size_t</span> len_control_frame = <span class="keyword">sizeof</span>(control_frame);</div>
<div class="line"></div>
<div class="line">c = <a class="code" href="group__fstrm__control.html#ga32839f6d4dd5e9c5554c9d6cbd4e69e1" title="Initialize an fstrm_control object. ">fstrm_control_init</a>();</div>
<div class="line">res = <a class="code" href="group__fstrm__control.html#ga5b7a7454dee3e122c1f2ac55720cddc2" title="Set the type of the control frame. ">fstrm_control_set_type</a>(c, <a class="code" href="group__fstrm__control.html#gga0210744b7c387b0ae6d55e9737c40117a3c99a233e0c4c15cd815c430bcdfe8a6" title="Control frame type value for &quot;Start&quot; control frames. ">FSTRM_CONTROL_START</a>);</div>
<div class="line"><span class="keywordflow">if</span> (res != <a class="code" href="group__fstrm__res.html#ggad3cb32b083ff99d02ccfbc1a69823329a89de17ab416590c6c61b2b5f7dd7844a" title="Success. ">fstrm_res_success</a>) {</div>
<div class="line">        <span class="comment">// Error handling.</span></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// Serialize the control frame.</span></div>
<div class="line">res = <a class="code" href="group__fstrm__control.html#ga27ea01561e578fada59e136d4928347f" title="Encode a control frame into a buffer. ">fstrm_control_encode</a>(c, control_frame, &amp;len_control_frame, 0);</div>
<div class="line"><span class="keywordflow">if</span> (res != <a class="code" href="group__fstrm__res.html#ggad3cb32b083ff99d02ccfbc1a69823329a89de17ab416590c6c61b2b5f7dd7844a" title="Success. ">fstrm_res_success</a>) {</div>
<div class="line">        <span class="comment">// Error handling goes here.</span></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// Do something with &#39;control_frame&#39; and &#39;len_control_frame&#39;.</span></div>
<div class="line"></div>
<div class="line"><span class="comment">// Clean up.</span></div>
<div class="line"><a class="code" href="group__fstrm__control.html#ga5dbe51deff01060740ff09402410d1e2" title="Destroy an fstrm_control object. ">fstrm_control_destroy</a>(&amp;c);</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">c</td><td><code>fstrm_control</code> object. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">control_frame</td><td>The buffer in which to serialize the control frame. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">len_control_frame</td><td>The size in bytes of <code>control_frame</code>. On a successful return, contains the number of bytes actually written into <code>control_frame</code>. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">flags</td><td>Flags controlling the encoding process. See <a class="el" href="group__fstrm__control.html#gabeea197ecccbc24933fecb30aa90826d" title="Flags for controlling the behavior of fstrm_control_encode() and fstrm_control_decode(). ">fstrm_control_flag</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>fstrm_res_success </dd>
<dd>
fstrm_res_failure </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
